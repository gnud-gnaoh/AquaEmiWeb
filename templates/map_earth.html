<!DOCTYPE html>
<html lang = "en">
    <head>
        <title>AquaEmi - Earth Map</title>
        <meta name = "description" content = "[Description about AquaEmi]">
        <link rel = "stylesheet" type = "text/css" href = "../static/map_earth.css">
        <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
        <script src="https://kit.fontawesome.com/b20eaf92de.js" crossorigin="anonymous"></script>
        
        <!-- Leaflet -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

        <!-- Leaflet heatmap plugin: https://github.com/Leaflet/Leaflet.heat -->
        <script src="leaflet-heat.js"></script>

        <!-- mapbox -->
        <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
        <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    </head>
    <body>
        <section class = "navigation" id = "navigation">
            <nav>
                <div class = "navigation_bar" id = "navigation_bar">
                    <img src="../static/images/logo.png" alt="AquaEmi's logo" style = "width: 12.5vw; height: 4.5vw;">
                    <div class = "navigation_keys" id = "navigation_keys">
                        <div class = "subjects" id = "subjects">
                            <p><a href = "index.html" title = "My water" style = "text-decoration: none; color: #00A66F;">My water</a></p>
                            <p><a href = "map.html" title = "Map" style = "text-decoration: none; color: #00A66F;">Map</a></p>
                            <p><a href = "travel.html" title = "Travel" style = "text-decoration: none; color: #00A66F;">Travel</a></p>
                            <p><a href = "news.html" title = "News & Rankings" style = "text-decoration: none; color: #00A66F;">News & Rankings</a></p>
                            <p><a href = "info.html" title = "Info" style = "text-decoration: none; color: #00A66F;">Info</a></p>
                        </div>
                        <div class = "tools" id = "tools">
                            <a href = "index.html"><img src = "../static/images/search.png" alt="AquaEmi's search icon" style = "width: 2vw"></a>
                            <a href = "index.html"><img src = "../static/images/notifications.PNG" alt="AquaEmi's notifications icon" style = "width: 1.75vw"></a>
                            <a href = "index.html"><img src = "../static/images/profile.PNG" alt="AquaEmi's profile icon" style = "width: 1.7vw;"></a>
                        </div>
                    </div>
                </div>
            </nav>
        </section>

        <section>
            <div class = "content" id = "content">
                <!-- pk.eyJ1IjoiaW5jdCIsImEiOiJjbGtydG1rcGwweW9xM2hudHNubjJyM2lmIn0.HkbRZ7BIWySya__ZCaKMOQ -->
                <div id = "map" style="width: 100%; height: 45vw"></div>
                <script>
                    mapboxgl.accessToken = 'pk.eyJ1IjoiZ251ZGduYW9oIiwiYSI6ImNsa3IxYnNxeTByMzAzZmw5b295bzMybXAifQ.O8QTFy-nv-5mMeVXVD51qA';
                    const map = new mapboxgl.Map({
                        container: 'map',
                        // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
                        style: 'mapbox://styles/mapbox/satellite-streets-v12',
                        center: [-130, 50],
                        zoom: 2.5
                    });
                
                    map.on('load', () => {
                        // Add a geojson point source.
                        // Heatmap layers also work with a vector tile source.
                        map.addSource('earthquakes', {
                            'type': 'geojson',
                            'data': 'https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson'
                        });
                
                        map.addLayer(
                            {
                                'id': 'earthquakes-heat',
                                'type': 'heatmap',
                                'source': 'earthquakes',
                                'maxzoom': 9,
                                'paint': {
                                    // Increase the heatmap weight based on frequency and property magnitude
                                    'heatmap-weight': [
                                        'interpolate',
                                        ['linear'],
                                        ['get', 'mag'],
                                        0,
                                        0,
                                        6,
                                        1
                                    ],
                                    // Increase the heatmap color weight weight by zoom level
                                    // heatmap-intensity is a multiplier on top of heatmap-weight
                                    'heatmap-intensity': [
                                        'interpolate',
                                        ['linear'],
                                        ['zoom'],
                                        0,
                                        1,
                                        9,
                                        3
                                    ],
                                    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).
                                    // Begin color ramp at 0-stop with a 0-transparancy color
                                    // to create a blur-like effect.
                                    'heatmap-color': [
                                        'interpolate',
                                        ['linear'],
                                        ['heatmap-density'],
                                        0,
                                        'rgba(33,102,172,0)',
                                        0.2,
                                        'rgb(103,169,207)',
                                        0.4,
                                        'rgb(209,229,240)',
                                        0.6,
                                        'rgb(253,219,199)',
                                        0.8,
                                        'rgb(239,138,98)',
                                        1,
                                        'rgb(178,24,43)'
                                    ],
                                    // Adjust the heatmap radius by zoom level
                                    'heatmap-radius': [
                                        'interpolate',
                                        ['linear'],
                                        ['zoom'],
                                        0,
                                        2,
                                        9,
                                        20
                                    ],
                                    // Transition from heatmap to circle layer by zoom level
                                    'heatmap-opacity': [
                                        'interpolate',
                                        ['linear'],
                                        ['zoom'],
                                        7,
                                        1,
                                        9,
                                        0
                                    ]
                                }
                            },
                            'waterway-label'
                        );
                
                        map.addLayer(
                            {
                                'id': 'earthquakes-point',
                                'type': 'circle',
                                'source': 'earthquakes',
                                'minzoom': 7,
                                'paint': {
                                    // Size circle radius by earthquake magnitude and zoom level
                                    'circle-radius': [
                                        'interpolate',
                                        ['linear'],
                                        ['zoom'],
                                        7,
                                        ['interpolate', ['linear'], ['get', 'mag'], 1, 1, 6, 4],
                                        16,
                                        ['interpolate', ['linear'], ['get', 'mag'], 1, 5, 6, 50]
                                    ],
                                    // Color circle by earthquake magnitude
                                    'circle-color': [
                                        'interpolate',
                                        ['linear'],
                                        ['get', 'mag'],
                                        1,
                                        'rgba(33,102,172,0)',
                                        2,
                                        'rgb(103,169,207)',
                                        3,
                                        'rgb(209,229,240)',
                                        4,
                                        'rgb(253,219,199)',
                                        5,
                                        'rgb(239,138,98)',
                                        6,
                                        'rgb(178,24,43)'
                                    ],
                                    'circle-stroke-color': 'white',
                                    'circle-stroke-width': 1,
                                    // Transition from heatmap to circle layer by zoom level
                                    'circle-opacity': [
                                        'interpolate',
                                        ['linear'],
                                        ['zoom'],
                                        7,
                                        0,
                                        8,
                                        1
                                    ]
                                }
                            },
                            'waterway-label'
                        );
                    });
            </script>
            <div class = "normal_map" id = "normal_map">
                <span class = "remove_ranking" id = "remove_ranking"><i class="fa-solid fa-x fa-2xs" style="color: #ffffff;"></i></span>
                <div class = "rankings" id = "rankings">
                    <p style = "font-size: 2.2vw; ">World WQI Ranking</p>
                    <p style = "font-size: 0.8vw; margin-top: -2vw">[Last updated]</p>
                    <button class = "full_ranking" id = "full_ranking">SEE FULL RANKING</button>
                </div>
                <img src="../static/images/map.png" alt="AquaEmi's logo" style = "width: 10vw; height: 5vw; border-radius: 0.3vw;cursor: pointer;" onclick = "location.href='map.html';">
            </div>
            </div>
            

            
        </section>

        <footer>
            <div class = "footer" id = "footer">
                <img src="../static/images/logo.png" alt="AquaEmi's logo" style = "width: 19vw; height: 6.5vw; margin-top: 1.3vw">
                <div class = "subjects_footer" id = "subjects_footer">
                    <div class = "first" id = "first">
                        <p>Intro</p>
                        <p>My water</p>
                    </div>
                    <div class = "second" id = "second">
                        <p>Map</p>
                        <p>Travel</p>
                    </div>
                    <div class = "third" id = "third">
                        <p>News and Rankings</p>
                        <p>Profile and notifications</p>
                    </div>
                </div>
                <div class = "mailing_list" id = "mailing_list">
                    <p style = "font-size: 1.2vw; font-weight: bold; color: #008A5C">JOIN OUR MAILING LIST!</p>
                    <input type = "email" class = "email_mailing" id = "email" name = "email" placeholder="Email address">
                    <i class="fa-solid fa-arrow-right fa-sm" style="color: #008a5c;"></i><br>
                    <div class = "social_media" id = "social_media">
                        <i class="fa-brands fa-square-instagram fa-sm" style="color: #01a26d; margin: 0 0.1vw"></i>
                        <i class="fa-brands fa-pinterest fa-sm" style="color: #01a26d; margin: 0 0.1vw"></i>
                        <i class="fa-brands fa-twitter fa-sm" style="color: #01a26d; margin: 0 0.1vw"></i>
                        <i class="fa-brands fa-facebook fa-sm" style="color: #01a26d; margin: 0 0.1vw"></i>
                    </div>
                </div>
            </div>
        </footer>
    </body>
</html>